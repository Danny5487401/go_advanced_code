# hash 算法
哈希算法只需满足把一个元素映射到另一个区间的要求。该要求是如此之低。

单向散列算法也称为哈希算法，它是一种不可逆的单向数学函数，把哈希算法应用于任意长度的一块数据，可以将它映射为一段数据唯一的、不可逆的、定长的、极其紧凑的字符串，这个字符串便称为散列值、哈希值或消息摘要。


## hash 函数分类：有加密型和非加密型
- 加密型的一般用于加密数据、数字摘要等，典型代表就是 md5、sha1、sha256、aes256 这种；
- 非加密型的一般就是查找。在 map 的应用场景中，用的是查找。选择 hash 函数主要考察的是两点：性能、碰撞概率

## 常见的 Hash 函数有：

- CRC32：CRC32 能够快速的生成 32 位 Hash 值，一般在数据库系统或数据传输中出现，用于快速校验数据是否完整；
- SipHash：SipHash 并不是为了速度设计的，与其他 Hash 函数相比速度上不占优势，而提供了 HashDoS 保护，是 Rust 中的 Hash 函数的默认实现，最新 Redis 中也在使用 SipHash；
- MurMurHash：经典快速的 Hash 函数，目前最新的版本是 MurMurHash3，可以生成 32 位或者 128 位 Hash 值；
- CityHash：来自于 Google 实现，受到 MurmurHash 启发，但是比 MurmurHash 更快，可以输出 64 位、128 位或者 256 位 Hash 值。ClickHouse 内置；
- xxHash：针对小数据集速度非常快，支持输出 32 位、64 位、128 位 Hash 值，Github 开源，SSE 支持。ClickHouse 内置

## HASH 算法主要应用：

1）文件校验 　　
我们比较熟悉的校验算法有奇偶校验和CRC校验，这2种校验并没有抗数据篡改的能力，它们一定程度上能检测并纠正数据传输中的信道误码，但却不能防止对数据的恶意破坏。 　　
MD5 Hash算法的"数字指纹"特性，使它成为目前应用最广泛的一种文件完整性校验和（Checksum）算法，不少Unix系统有提供计算md5 checksum的命令。 
　　
2）数字签名 　　
Hash 算法也是现代密码体系中的一个重要组成部分。由于非对称算法的运算速度较慢，所以在数字签名协议中，单向散列函数扮演了一个重要的角色。
对 Hash 值，又称"数字摘要"进行数字签名，在统计上可以认为与对文件本身进行数字签名是等效的。而且这样的协议还有其他的优点。 　　

3）鉴权协议 　　
如下的鉴权协议又被称作"挑战--认证模式：在传输信道是可被侦听，但不可被篡改的情况下，这是一种简单而安全的方法。


### 数字签名

数字签名，顾名思义，就像在办公中用笔对纸质文件进行签名，它是在计算机上对数据文件进行签名，用于鉴别数字信息，验证数据发送方的身份，保证数据的完整性和不可否认性。

它结合使用了非对称加密技术与哈希算法来实现，它包含两种互补的运算：一个用于数字签名的签署，另一个用于数字签名的验证。
签名和验签的过程一般由启用 PKI 的应用程序完成，首先由数据的发送方用哈希算法生成数据的哈希值，然后用自己的私钥将这个哈希值加密形成数字签名，将它与数据一起加密发送给接收方；
接收方进行解密获得数据和数字签名后，用发送方的公钥对数字签名进行解密，如果成功解密，即证明了发送方的身份；
对数字签名解密得到数据的哈希值之后，数据的接收方对数据用相同的哈希算法生成另一个哈希值，然后将这两个哈希值进行比较，如果两者相同，则证明这块数据极有可能在传输期间没有被篡改

#### 数字签名 对比 消息加密/消息认证
- 与消息加密不同：消息加密和解密可能是一次性的，它要求在解密之前是安全的；而一个签字的消息可能作为一个法律上的文件，如合同等，很可能在对消息签署多年之后才验证其签字，且可能需要多次验证此签字。
- 与消息认证不同：数字签名也是一种消息认证技术，它属于非对称密码体制，消息认证码属于对称密码体制，所以消息认证码的处理速度比数字签名快得多。但是，消息认证码无法实现不可否认性。


## 参考资料
- [xxhash关于hash统计及实现](https://github.com/Cyan4973/xxHash/tree/release)
